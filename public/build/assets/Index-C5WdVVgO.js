import{r as d,S as u,x as U,j as e,Q as de}from"./app-Bm2las7t.js";import{P as p}from"./PrimaryButton-SGatM-XN.js";import{S as b}from"./dialog-JPpLIL6M.js";import{M as N}from"./Modal-8QM-5qxT.js";import{D as ce}from"./DashboardMenu-BYK-y3Yg.js";import{S as H}from"./SafeLink-DTnPHGhy.js";import"./transition-CBy7Nih_.js";import"./ApplicationLogo-DKyYxY4T.js";import"./ResponsiveNavLink-D2HLaNb5.js";function je({appointments:l,stats:x,filters:i}){const[W,v]=d.useState(!1),[G,y]=d.useState(!1),[Q,k]=d.useState(!1),[X,w]=d.useState(!1),[Z,C]=d.useState(!1),[t,m]=d.useState(null),[c,j]=d.useState([]),[A,T]=d.useState(""),[R,z]=d.useState(""),[n,q]=d.useState(""),[D,P]=d.useState(""),[_,F]=d.useState("table"),[S,J]=d.useState(!1);d.useEffect(()=>{if(!S)return;const s=setInterval(()=>{u.reload({only:["appointments","stats"]})},3e4);return()=>clearInterval(s)},[S]);const a=U({status:i.status||"",priority:i.priority||"",date_from:i.date_from||"",date_to:i.date_to||"",search:i.search||"",sort_by:i.sort_by||"created_at",sort_order:i.sort_order||"desc",per_page:i.per_page||20}),r=U({name:"",email:"",phone:"",subject:"",message:"",preferred_date:"",preferred_time:"",priority:"normal",status:"pending",admin_notes:""}),K=()=>{a.get(route("admin.appointments.index"))},Y=()=>{a.reset(),u.get(route("admin.appointments.index"))},ee=()=>{if(!A.trim()){alert("Veuillez indiquer une raison de refus.");return}u.post(route("admin.appointments.reject",t.id),{rejection_reason:A},{onSuccess:()=>{v(!1),m(null),T("")}})},se=()=>{if(!R.trim()){alert("Veuillez indiquer une raison d'annulation.");return}u.post(route("admin.appointments.cancel",t.id),{admin_notes:R},{onSuccess:()=>{y(!1),m(null),z("")}})},$=s=>{confirm("Êtes-vous sûr de vouloir accepter ce rendez-vous ?")&&u.post(route("admin.appointments.accept",s.id))},re=s=>{confirm("Marquer ce rendez-vous comme terminé ?")&&u.post(route("admin.appointments.complete",s.id))},te=()=>{r.put(route("admin.appointments.update",t.id),{onSuccess:()=>{w(!1),m(null),r.reset()}})},I=s=>{m(s),r.setData({name:s.name,email:s.email,phone:s.phone,subject:s.subject,message:s.message||"",preferred_date:s.preferred_date,preferred_time:s.preferred_time,priority:s.priority,status:s.status,admin_notes:s.admin_notes||""}),w(!0)},ae=()=>{if(!n){alert("Veuillez sélectionner une action.");return}if(c.length===0){alert("Veuillez sélectionner au moins un rendez-vous.");return}if((n==="reject"||n==="cancel")&&!D.trim()){alert("Veuillez indiquer une raison.");return}u.post(route("admin.appointments.bulk-action"),{appointment_ids:c,action:n,reason:D},{onSuccess:()=>{C(!1),j([]),q(""),P("")}})},L=s=>{j(o=>o.includes(s)?o.filter(M=>M!==s):[...o,s])},O=()=>{c.length===l.data.length?j([]):j(l.data.map(s=>s.id))},V=s=>{m(s),v(!0)},le=s=>{m(s),y(!0)},B=s=>{m(s),k(!0)},h=s=>{switch(s){case"urgent":return{text:"URGENT",class:"text-red-700 bg-red-100 border-red-300"};case"official":return{text:"OFFICIEL",class:"text-blue-700 bg-blue-100 border-blue-300"};case"normal":return{text:"NORMALE",class:"text-gray-700 bg-gray-100 border-gray-300"};default:return{text:"NORMALE",class:"text-gray-700 bg-gray-100 border-gray-300"}}},g=s=>{switch(s){case"pending":return{text:"EN ATTENTE",class:"text-orange-700 bg-orange-100 border-orange-300"};case"accepted":return{text:"ACCEPTÉ",class:"text-green-700 bg-green-100 border-green-300"};case"rejected":return{text:"REFUSÉ",class:"text-red-700 bg-red-100 border-red-300"};case"canceled":return{text:"ANNULÉ",class:"text-gray-700 bg-gray-100 border-gray-300"};case"canceled_by_requester":return{text:"ANNULÉ PAR LE CLIENT",class:"text-gray-700 bg-gray-100 border-gray-300"};case"completed":return{text:"TERMINÉ",class:"text-blue-700 bg-blue-100 border-blue-300"};case"expired":return{text:"EXPIRÉ",class:"text-yellow-700 bg-yellow-100 border-yellow-300"};default:return{text:"EN ATTENTE",class:"text-orange-700 bg-orange-100 border-orange-300"}}},f=s=>new Date(s).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),E=s=>s;return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Gestion des rendez-vous - Administration"}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ce,{}),e.jsx("header",{className:"bg-white shadow-sm border-b mb-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des rendez-vous"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Outil de gestion efficace des demandes de rendez-vous"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoRefresh",checked:S,onChange:s=>J(s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"autoRefresh",className:"text-sm text-gray-600",children:"Auto-refresh"})]}),e.jsx(H,{href:route("admin.dashboard"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"← Retour au tableau de bord"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-gray-400",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-orange-400",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-500",children:x.pending}),e.jsx("div",{className:"text-sm text-gray-600",children:"En attente"}),x.pending>0&&e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"⚠️ Action requise"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-green-400",children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:x.accepted}),e.jsx("div",{className:"text-sm text-gray-600",children:"Acceptés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-red-400",children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:x.rejected}),e.jsx("div",{className:"text-sm text-gray-600",children:"Refusés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-gray-300",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:x.canceled}),e.jsx("div",{className:"text-sm text-gray-600",children:"Annulés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-blue-400",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:x.completed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Terminés"})]})]}),c.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-blue-800 font-medium",children:[c.length," rendez-vous sélectionné(s)"]}),e.jsx("button",{onClick:()=>C(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700",children:"Actions en lot"})]}),e.jsx("button",{onClick:()=>j([]),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Annuler la sélection"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtres et recherche"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>F("table"),className:`px-3 py-1 rounded-md text-sm font-medium ${_==="table"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tableau"}),e.jsx("button",{onClick:()=>F("cards"),className:`px-3 py-1 rounded-md text-sm font-medium ${_==="cards"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Cartes"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),e.jsxs("select",{value:a.data.status,onChange:s=>a.setData("status",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"accepted",children:"Accepté"}),e.jsx("option",{value:"rejected",children:"Refusé"}),e.jsx("option",{value:"canceled",children:"Annulé"}),e.jsx("option",{value:"canceled_by_requester",children:"Annulé par le demandeur"}),e.jsx("option",{value:"expired",children:"Expiré"}),e.jsx("option",{value:"completed",children:"Terminé"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priorité"}),e.jsxs("select",{value:a.data.priority,onChange:s=>a.setData("priority",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Toutes les priorités"}),e.jsx("option",{value:"normal",children:"Normale"}),e.jsx("option",{value:"urgent",children:"Urgente"}),e.jsx("option",{value:"official",children:"Officielle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recherche"}),e.jsx("input",{type:"text",value:a.data.search,onChange:s=>a.setData("search",s.target.value),placeholder:"Nom, email ou objet...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Par page"}),e.jsxs("select",{value:a.data.per_page,onChange:s=>a.setData("per_page",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de début"}),e.jsx("input",{type:"date",value:a.data.date_from,onChange:s=>a.setData("date_from",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de fin"}),e.jsx("input",{type:"date",value:a.data.date_to,onChange:s=>a.setData("date_to",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tri"}),e.jsxs("select",{value:`${a.data.sort_by}-${a.data.sort_order}`,onChange:s=>{const[o,M]=s.target.value.split("-");a.setData("sort_by",o),a.setData("sort_order",M)},className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"created_at-desc",children:"Plus récents"}),e.jsx("option",{value:"created_at-asc",children:"Plus anciens"}),e.jsx("option",{value:"preferred_date-asc",children:"Date RDV (croissant)"}),e.jsx("option",{value:"preferred_date-desc",children:"Date RDV (décroissant)"}),e.jsx("option",{value:"name-asc",children:"Nom (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Nom (Z-A)"}),e.jsx("option",{value:"priority-desc",children:"Priorité (haute → basse)"}),e.jsx("option",{value:"priority-asc",children:"Priorité (basse → haute)"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(p,{onClick:K,children:"🔍 Appliquer les filtres"}),e.jsx(b,{onClick:Y,children:"🔄 Réinitialiser"})]})]}),_==="table"&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Rendez-vous (",l.total,")"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:c.length===l.data.length&&l.data.length>0,onChange:O,className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Sélectionner tout"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:c.length===l.data.length&&l.data.length>0,onChange:O,className:"rounded border-gray-300"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Demandeur"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Objet"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date/Heure"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priorité"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.data.map(s=>e.jsxs("tr",{className:`hover:bg-gray-50 ${s.status==="pending"?"bg-orange-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:c.includes(s.id),onChange:()=>L(s.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),e.jsx("div",{className:"text-xs text-gray-400",children:s.phone})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:s.subject}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Créé le ",f(s.created_at)]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:f(s.preferred_date)}),e.jsx("div",{className:"text-sm text-gray-500",children:E(s.preferred_time)})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${h(s.priority).class}`,children:h(s.priority).text})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${g(s.status).class}`,children:g(s.status).text})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(s),className:"text-blue-600 hover:text-blue-900",children:"👁️ Voir"}),e.jsx("button",{onClick:()=>I(s),className:"text-purple-600 hover:text-purple-900",children:"✏️ Modifier"}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>$(s),className:"text-green-600 hover:text-green-900",children:"✅ Accepter"}),e.jsx("button",{onClick:()=>V(s),className:"text-red-600 hover:text-red-900",children:"❌ Refuser"}),e.jsx("button",{onClick:()=>le(s),className:"text-gray-600 hover:text-gray-900",children:"🚫 Annuler"})]}),s.status==="accepted"&&e.jsx("button",{onClick:()=>re(s),className:"text-blue-600 hover:text-blue-900",children:"✅ Terminer"})]})})]},s.id))})]})}),l.links&&e.jsx("div",{className:"px-6 py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",l.from," à ",l.to," sur ",l.total," résultats"]}),e.jsx("div",{className:"flex space-x-2",children:l.links.map((s,o)=>s.url?e.jsx(H,{href:s.url,className:`px-3 py-2 text-sm rounded-md ${s.active?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,dangerouslySetInnerHTML:{__html:s.label}},o):e.jsx("span",{className:`px-3 py-2 text-sm rounded-md opacity-50 cursor-not-allowed ${s.active?"bg-blue-500 text-white":"bg-white text-gray-700"}`,dangerouslySetInnerHTML:{__html:s.label}},o))})]})})]}),_==="cards"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.data.map(s=>e.jsx("div",{className:`bg-white rounded-lg shadow-md border-l-4 ${s.status==="pending"?"border-orange-400":s.status==="accepted"?"border-green-400":s.status==="rejected"?"border-red-400":s.status==="completed"?"border-blue-400":"border-gray-400"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.email}),e.jsx("p",{className:"text-xs text-gray-500",children:s.phone})]}),e.jsx("input",{type:"checkbox",checked:c.includes(s.id),onChange:()=>L(s.id),className:"rounded border-gray-300"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-900 font-medium mb-2",children:s.subject}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.message&&s.message.substring(0,100),"..."]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Date"}),e.jsx("p",{className:"text-sm font-medium",children:f(s.preferred_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Heure"}),e.jsx("p",{className:"text-sm font-medium",children:E(s.preferred_time)})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${h(s.priority).class}`,children:h(s.priority).text}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${g(s.status).class}`,children:g(s.status).text})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(s),className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700",children:"👁️ Détails"}),e.jsx("button",{onClick:()=>I(s),className:"bg-purple-600 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-700",children:"✏️ Modifier"}),s.status==="pending"&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>$(s),className:"bg-green-600 text-white px-2 py-2 rounded-md text-sm hover:bg-green-700",title:"Accepter",children:"✅"}),e.jsx("button",{onClick:()=>V(s),className:"bg-red-600 text-white px-2 py-2 rounded-md text-sm hover:bg-red-700",title:"Refuser",children:"❌"})]})]})]})},s.id))})]})]}),e.jsx(N,{show:Q,onClose:()=>k(!1),maxWidth:"2xl",children:t&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Détails du rendez-vous - ",t.name]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Informations du demandeur"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nom :"})," ",t.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email :"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Téléphone :"})," ",t.phone]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Date de création :"})," ",f(t.created_at)]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Détails du rendez-vous"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Objet :"})," ",t.subject]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Date souhaitée :"})," ",f(t.preferred_date)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Heure souhaitée :"})," ",E(t.preferred_time)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Priorité :"}),e.jsx("span",{className:`ml-1 inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${h(t.priority).class}`,children:h(t.priority).text})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Statut :"}),e.jsx("span",{className:`ml-1 inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${g(t.status).class}`,children:g(t.status).text})]})]})]})]}),t.message&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Message du demandeur"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:t.message})})]}),t.rejection_reason&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-red-900 mb-2",children:"Raison du refus"}),e.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-red-700",children:t.rejection_reason})})]}),t.admin_notes&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Notes administratives"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-700",children:t.admin_notes})})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx(b,{onClick:()=>k(!1),children:"Fermer"})})]})}),e.jsx(N,{show:X,onClose:()=>w(!1),maxWidth:"4xl",children:t&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:["Modifier le rendez-vous - ",t.name]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),te()},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Informations du demandeur"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),e.jsx("input",{type:"text",value:r.data.name,onChange:s=>r.setData("name",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.name&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:r.data.email,onChange:s=>r.setData("email",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.email&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone *"}),e.jsx("input",{type:"tel",value:r.data.phone,onChange:s=>r.setData("phone",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.phone&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.phone})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Détails du rendez-vous"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objet *"}),e.jsx("input",{type:"text",value:r.data.subject,onChange:s=>r.setData("subject",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.subject&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.subject})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date souhaitée *"}),e.jsx("input",{type:"date",value:r.data.preferred_date,onChange:s=>r.setData("preferred_date",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.preferred_date&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.preferred_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure souhaitée *"}),e.jsx("input",{type:"time",value:r.data.preferred_time,onChange:s=>r.setData("preferred_time",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.preferred_time&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.preferred_time})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priorité *"}),e.jsxs("select",{value:r.data.priority,onChange:s=>r.setData("priority",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"normal",children:"NORMALE"}),e.jsx("option",{value:"urgent",children:"URGENT"}),e.jsx("option",{value:"official",children:"OFFICIEL"})]}),r.errors.priority&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.priority})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut *"}),e.jsxs("select",{value:r.data.status,onChange:s=>r.setData("status",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"pending",children:"EN ATTENTE"}),e.jsx("option",{value:"accepted",children:"ACCEPTÉ"}),e.jsx("option",{value:"rejected",children:"REFUSÉ"}),e.jsx("option",{value:"canceled",children:"ANNULÉ"}),e.jsx("option",{value:"completed",children:"TERMINÉ"}),e.jsx("option",{value:"expired",children:"EXPIRÉ"})]}),r.errors.status&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.status})]})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message du demandeur"}),e.jsx("textarea",{value:r.data.message,onChange:s=>r.setData("message",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"3",placeholder:"Message du demandeur..."}),r.errors.message&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes administratives"}),e.jsx("textarea",{value:r.data.admin_notes,onChange:s=>r.setData("admin_notes",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"3",placeholder:"Notes administratives..."}),r.errors.admin_notes&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:r.errors.admin_notes})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(b,{type:"button",onClick:()=>w(!1),children:"Annuler"}),e.jsx(p,{type:"submit",disabled:r.processing,children:r.processing?"Enregistrement...":"Enregistrer les modifications"})]})]})]})}),e.jsx(N,{show:W,onClose:()=>v(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Refuser le rendez-vous"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Veuillez indiquer la raison du refus pour le rendez-vous de ",e.jsx("strong",{children:t==null?void 0:t.name}),"."]}),e.jsx("textarea",{value:A,onChange:s=>T(s.target.value),placeholder:"Raison du refus...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(b,{onClick:()=>v(!1),children:"Annuler"}),e.jsx(p,{onClick:ee,children:"Confirmer le refus"})]})]})}),e.jsx(N,{show:G,onClose:()=>y(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Annuler le rendez-vous"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Veuillez indiquer la raison de l'annulation pour le rendez-vous de ",e.jsx("strong",{children:t==null?void 0:t.name}),"."]}),e.jsx("textarea",{value:R,onChange:s=>z(s.target.value),placeholder:"Raison de l'annulation...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(b,{onClick:()=>y(!1),children:"Annuler"}),e.jsx(p,{onClick:se,children:"Confirmer l'annulation"})]})]})}),e.jsx(N,{show:Z,onClose:()=>C(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Actions en lot (",c.length," rendez-vous)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action à effectuer"}),e.jsxs("select",{value:n,onChange:s=>q(s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Sélectionner une action"}),e.jsx("option",{value:"accept",children:"Accepter"}),e.jsx("option",{value:"reject",children:"Refuser"}),e.jsx("option",{value:"cancel",children:"Annuler"}),e.jsx("option",{value:"complete",children:"Marquer comme terminé"})]})]}),(n==="reject"||n==="cancel")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:n==="reject"?"Raison du refus":"Raison de l'annulation"}),e.jsx("textarea",{value:D,onChange:s=>P(s.target.value),placeholder:`Raison du ${n==="reject"?"refus":"annulation"}...`,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"3"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(b,{onClick:()=>C(!1),children:"Annuler"}),e.jsx(p,{onClick:ae,children:"Exécuter l'action"})]})]})})]})}export{je as default};
