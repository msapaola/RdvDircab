import{r as i,j as e,Q as j,S as d}from"./app-DzAeocU9.js";import{P as f}from"./PrimaryButton-DwcnEc3s.js";import{S as g}from"./dialog-CPyMtlmf.js";import{M as v}from"./Modal-huU3AkSo.js";import{A as N}from"./ApplicationLogo-DPGxUKZd.js";import"./transition-CcjnMsH9.js";function z({appointment:s,activities:b}){const[c,a]=i.useState(!1),[t,l]=i.useState(!1),o=async()=>{l(!0);try{d.post(`/appointments/${s.secure_token}/cancel`,{},{onSuccess:()=>{d.reload()},onError:r=>{console.error("Erreur lors de l'annulation:",r),alert("Une erreur est survenue lors de l'annulation du rendez-vous.")},onFinish:()=>{l(!1),a(!1)}})}catch(r){console.error("Erreur de connexion:",r),alert("Une erreur de connexion est survenue. Veuillez réessayer."),l(!1),a(!1)}},m=r=>{switch(r){case"pending":return"En attente";case"accepted":return"Accepté";case"rejected":return"Refusé";case"canceled":return"Annulé";case"canceled_by_requester":return"Annulé par vous";case"completed":return"Terminé";case"expired":return"Expiré";default:return"En attente"}},x=r=>{switch(r){case"normal":return"Normal";case"urgent":return"Urgent";case"official":return"Officiel";default:return"Normal"}},n=r=>r?new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"}):"",u=r=>r?new Date(r).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return e.jsxs(e.Fragment,{children:[e.jsx(j,{title:`Suivi - ${s.subject}`}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(N,{className:"h-14 w-auto"})}),e.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"← Retour à l'accueil"})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mt-8 mb-4 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Suivi de votre demande"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Cabinet du Gouverneur de Kinshasa"})]}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Statut de votre demande"}),e.jsx("span",{className:"text-base font-medium",children:s.status?m(s.status):"Non renseigné"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Détails de la demande"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Objet :"})," ",s.subject]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date souhaitée :"})," ",s.preferred_date?n(s.preferred_date):"Non définie"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Heure souhaitée :"})," ",s.preferred_time?s.preferred_time.slice(0,5).replace(":","h"):"Non définie"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Priorité :"})," ",s.priority?x(s.priority):"Non définie"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Vos informations"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nom :"})," ",s.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email :"})," ",s.email]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Téléphone :"})," ",s.phone]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date de soumission :"})," ",s.created_at?u(s.created_at):"Non définie"]})]})]})]}),s.message&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Message"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-700",children:s.message})]}),s.attachments&&s.attachments.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:["Pièces jointes (",s.attachments.length,")"]}),e.jsx("div",{className:"space-y-2",children:s.attachments.map((r,h)=>e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),r.name]},h))})]}),s.status==="accepted"&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Actions disponibles"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("button",{onClick:()=>a(!0),disabled:t,className:"inline-flex items-center px-6 py-3 rounded-lg bg-red-600 text-white font-semibold shadow-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),t?"Annulation en cours...":"Annuler ce rendez-vous"]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"⚠️ Cette action est irréversible. Votre rendez-vous sera définitivement annulé."})]})}),s.status!=="accepted"&&s.status!=="canceled"&&s.status!=="canceled_by_requester"&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center px-4 py-2 rounded-lg bg-gray-100 text-gray-600",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Aucune action disponible pour ce statut"]})})}),s.admin_notes&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Note de l'administration"}),e.jsx("p",{className:"text-sm text-blue-800",children:s.admin_notes})]}),s.rejection_reason&&e.jsxs("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 mb-2",children:"Raison du refus"}),e.jsx("p",{className:"text-sm text-red-800",children:s.rejection_reason})]})]})}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Informations importantes"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Vous recevrez une notification par email lors de tout changement de statut"}),e.jsx("li",{children:"• Les rendez-vous acceptés peuvent être annulés jusqu'à 24h avant la date"}),e.jsx("li",{children:"• En cas d'urgence, contactez-nous directement au +243 XXX XXX XXX"})]})]})]})]}),e.jsx(v,{show:c,onClose:()=>!t&&a(!1),maxWidth:"md",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmer l'annulation"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Êtes-vous sûr de vouloir annuler votre rendez-vous ? Cette action ne peut pas être annulée."}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-900 mb-2",children:"Détails du rendez-vous :"}),e.jsxs("div",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Objet :"})," ",s.subject]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date :"})," ",s.preferred_date?n(s.preferred_date):"Non définie"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Heure :"})," ",s.preferred_time?s.preferred_time.slice(0,5).replace(":","h"):"Non définie"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(g,{onClick:()=>a(!1),disabled:t,children:"Annuler"}),e.jsx(f,{onClick:o,disabled:t,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:t?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Annulation..."]}):"Confirmer l'annulation"})]})]})})})]})}export{z as default};
