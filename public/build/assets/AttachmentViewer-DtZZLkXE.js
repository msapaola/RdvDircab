import{r as m,j as e}from"./app-4XmrWr_t.js";function N({attachments:i,appointmentId:a}){const[n,c]=m.useState(null),[o,x]=m.useState(null),u=r=>{const s=/\.(jpg|jpeg|png|gif|webp|svg|bmp)$/i.test(r),l=/\.pdf$/i.test(r),t=/\.(txt|md|log|csv|json|xml|html|css|js)$/i.test(r),v=/\.(doc|docx)$/i.test(r),b=/\.(xls|xlsx|csv)$/i.test(r),f=/\.(zip|rar|7z|tar|gz)$/i.test(r),j=/\.(mp4|avi|mov|wmv|flv|webm)$/i.test(r),w=/\.(mp3|wav|ogg|flac|aac)$/i.test(r);return s?{icon:e.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200"}:l?{icon:e.jsx("svg",{className:"w-5 h-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),color:"text-red-500",bgColor:"bg-red-50",borderColor:"border-red-200"}:v?{icon:e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"}:b?{icon:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200"}:t?{icon:e.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),color:"text-green-500",bgColor:"bg-green-50",borderColor:"border-green-200"}:f?{icon:e.jsxs("svg",{className:"w-5 h-5 text-purple-500",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4z"}),e.jsx("path",{d:"M4 3h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2z"})]}),color:"text-purple-500",bgColor:"bg-purple-50",borderColor:"border-purple-200"}:j?{icon:e.jsxs("svg",{className:"w-5 h-5 text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M2 6a2 2 0 012-2h6l2 2h6a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"}),e.jsx("path",{d:"M8 11l3-1.5v3L8 14v-3z"})]}),color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}:w?{icon:e.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.5 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.5l3.883-3.793a1 1 0 011.617.793zM12.293 7.293a1 1 0 011.414 0L15 8.586l1.293-1.293a1 1 0 111.414 1.414L16.414 10l1.293 1.293a1 1 0 01-1.414 1.414L15 11.414l-1.293 1.293a1 1 0 01-1.414-1.414L13.586 10l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),color:"text-yellow-500",bgColor:"bg-yellow-50",borderColor:"border-yellow-200"}:{icon:e.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200"}},h=r=>{if(r===0)return"0 Bytes";const s=1024,l=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(r)/Math.log(s));return parseFloat((r/Math.pow(s,t)).toFixed(2))+" "+l[t]},g=r=>{const s=/\.(jpg|jpeg|png|gif|webp|svg|bmp)$/i.test(r),l=/\.pdf$/i.test(r),t=/\.(txt|md|log|csv|json|xml|html|css|js)$/i.test(r);return s||l||t},p=r=>{const s=route("admin.appointments.attachments.preview",[a,r.name]);c(s),x(r.name)},d=()=>{c(null),x(null)};return!i||i.length===0?e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Pièces jointes"}),e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Aucune pièce jointe"})]})]}):e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-3",children:["Pièces jointes (",i.length,")"]}),e.jsx("div",{className:"space-y-3",children:i.map((r,s)=>{const l=u(r.name),t=r.size?h(r.size):"Taille inconnue";return e.jsxs("div",{className:`${l.bgColor} ${l.borderColor} border rounded-lg p-4 hover:shadow-md transition-shadow`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`${l.color} flex-shrink-0`,children:l.icon}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[t,r.mime_type&&` • ${r.mime_type}`]})]})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("a",{href:route("admin.appointments.attachments.download",[a,r.name]),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Télécharger"]}),g(r.name)&&e.jsxs("button",{onClick:()=>p(r),className:"inline-flex items-center px-3 py-1.5 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[e.jsxs("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:[e.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),/\.(jpg|jpeg|png|gif|webp|svg|bmp)$/i.test(r.name)?"Voir":"Lire"]})]})]},s)})}),n&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:d})}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Prévisualisation : ",o]}),e.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"max-h-96 overflow-auto",children:/\.(jpg|jpeg|png|gif|webp|svg|bmp)$/i.test(o)?e.jsx("img",{src:n,alt:o,className:"max-w-full h-auto mx-auto",onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="block"}}):/\.pdf$/i.test(o)?e.jsxs("div",{className:"relative",children:[e.jsx("iframe",{src:n,className:"w-full h-96 border-0",title:o,onError:r=>{console.error("Erreur de chargement PDF:",r)}}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("a",{href:route("admin.appointments.attachments.download",[a,o]),className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",title:"Télécharger",children:e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]}):/\.(txt|md|log|csv|json|xml|html|css|js)$/i.test(o)?e.jsx("iframe",{src:n,className:"w-full h-96 border-0",title:o}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Prévisualisation non disponible pour ce type de fichier"}),e.jsx("a",{href:route("admin.appointments.attachments.download",[a,o]),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Télécharger le fichier"})]})})]}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:e.jsx("button",{type:"button",onClick:d,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Fermer"})})]})]})})]})}export{N as A};
