import{r as o,x as u,j as e,Q as k,t as _,S as c}from"./app-Cf9fbO_m.js";import{A}from"./AdminLayout-BV8YOq4W.js";import{P as m}from"./PrimaryButton-DDFkTA6b.js";import{S as h}from"./SecondaryButton-C7OcH8if.js";import{M as p}from"./Modal-B6UVUFNb.js";import"./ApplicationLogo-Csogalo6.js";import"./ResponsiveNavLink-l3F2Jj7i.js";import"./transition-CRqTjt7I.js";function P({auth:d,users:n}){const[g,i]=o.useState(!1),[f,l]=o.useState(!1),[j,x]=o.useState(null),s=u({name:"",email:"",password:"",password_confirmation:"",role:"assistant",is_active:!0}),a=u({name:"",email:"",role:"",is_active:!0}),b=()=>{s.post(route("admin.users.store"),{onSuccess:()=>{i(!1),s.reset()}})},v=()=>{a.put(route("admin.users.update",j.id),{onSuccess:()=>{l(!1),x(null),a.reset()}})},y=t=>{confirm(`Êtes-vous sûr de vouloir supprimer l'utilisateur ${t.name} ?`)&&c.delete(route("admin.users.destroy",t.id))},N=t=>{const r=t.is_active?"désactiver":"activer";confirm(`Êtes-vous sûr de vouloir ${r} l'utilisateur ${t.name} ?`)&&c.post(route("admin.users.toggle-status",t.id))},w=t=>{const r=t.role==="admin"?"assistant":"admin";confirm(`Êtes-vous sûr de vouloir ${r==="admin"?"promouvoir administrateur":"rétrograder assistant"} pour ${t.name} ?`)&&c.post(route("admin.users.change-role",t.id),{role:r})},C=t=>{x(t),a.setData({name:t.name,email:t.email,role:t.role,is_active:t.is_active}),l(!0)};return e.jsxs(A,{user:d.user,children:[e.jsx(k,{title:"Gestion des utilisateurs - Administration"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des utilisateurs"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Gestion des comptes administrateurs et assistants"})]}),e.jsx(m,{onClick:()=>i(!0),children:"Ajouter un utilisateur"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Utilisateurs (",n.length,")"]})}),n.length===0?e.jsx("div",{className:"px-6 py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Aucun utilisateur trouvé."})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dernière activité"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:t.role==="admin"?"Administrateur":"Assistant"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Actif":"Inactif"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.last_login_at?new Date(t.last_login_at).toLocaleDateString("fr-FR"):"Jamais connecté"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(_,{href:route("admin.users.show",t.id),className:"text-blue-600 hover:text-blue-900",children:"Voir"}),e.jsx("button",{onClick:()=>C(t),className:"text-indigo-600 hover:text-indigo-900",children:"Modifier"}),e.jsx("button",{onClick:()=>N(t),className:`${t.is_active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:t.is_active?"Désactiver":"Activer"}),t.id!==d.user.id&&e.jsx("button",{onClick:()=>w(t),className:"text-orange-600 hover:text-orange-900",children:t.role==="admin"?"Rétrograder":"Promouvoir"}),t.id!==d.user.id&&e.jsx("button",{onClick:()=>y(t),className:"text-red-600 hover:text-red-900",children:"Supprimer"})]})})]},t.id))})]})})]})]})}),e.jsx(p,{show:g,onClose:()=>i(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ajouter un utilisateur"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),e.jsx("input",{type:"text",value:s.data.name,onChange:t=>s.setData("name",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:s.data.email,onChange:t=>s.setData("email",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),e.jsx("input",{type:"password",value:s.data.password,onChange:t=>s.setData("password",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le mot de passe"}),e.jsx("input",{type:"password",value:s.data.password_confirmation,onChange:t=>s.setData("password_confirmation",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rôle"}),e.jsxs("select",{value:s.data.role,onChange:t=>s.setData("role",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"assistant",children:"Assistant"}),e.jsx("option",{value:"admin",children:"Administrateur"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:s.data.is_active,onChange:t=>s.setData("is_active",t.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Compte actif"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(h,{onClick:()=>i(!1),children:"Annuler"}),e.jsx(m,{onClick:b,children:"Créer"})]})]})}),e.jsx(p,{show:f,onClose:()=>l(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Modifier l'utilisateur"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),e.jsx("input",{type:"text",value:a.data.name,onChange:t=>a.setData("name",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:a.data.email,onChange:t=>a.setData("email",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rôle"}),e.jsxs("select",{value:a.data.role,onChange:t=>a.setData("role",t.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"assistant",children:"Assistant"}),e.jsx("option",{value:"admin",children:"Administrateur"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"edit_is_active",checked:a.data.is_active,onChange:t=>a.setData("is_active",t.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"edit_is_active",className:"ml-2 text-sm text-gray-700",children:"Compte actif"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(h,{onClick:()=>l(!1),children:"Annuler"}),e.jsx(m,{onClick:v,children:"Mettre à jour"})]})]})})]})}export{P as default};
