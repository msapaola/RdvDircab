import{r as g,x as j,j as e,Q as Z,t as v,S as N}from"./app-CqJhIsUV.js";import{S as w}from"./StatusBadge-RuFah18S.js";import{P as m}from"./PrimaryButton-7QeJtmcm.js";import{S as b}from"./dialog-B0x4x6F7.js";import{M as y}from"./Modal-BqccjkIn.js";import{D as W}from"./DashboardMenu-BlGEO_TN.js";import"./transition-BfBAWvaR.js";import"./ApplicationLogo-CSFTwUYL.js";import"./ResponsiveNavLink-BUaB1XLt.js";import"./SafeLink-CDJqioYe.js";function Y({users:_,stats:C,filters:A,auth:S}){const t=_||{data:[],total:0,links:[],from:0,to:0},o=C||{total:0,admins:0,assistants:0,verified:0,unverified:0},n=A||{},f=S||{user:null};(!t.links||!Array.isArray(t.links))&&(t.links=[]),(!t.data||!Array.isArray(t.data))&&(t.data=[]),t.current_page=t.current_page||1,t.last_page=t.last_page||1,t.per_page=t.per_page||15,t.total=t.total||0,t.from=t.from||0,t.to=t.to||0;const[k,x]=g.useState(!1),[D,u]=g.useState(!1),[M,h]=g.useState(!1),[c,p]=g.useState(null),d=j({role:n.role||"",search:n.search||"",status:n.status||"",sort_by:n.sort_by||"created_at",sort_order:n.sort_order||"desc"}),r=j({name:"",email:"",password:"",password_confirmation:"",role:"assistant"}),a=j({name:"",email:"",password:"",password_confirmation:"",role:""}),E=()=>{d.get(route("admin.users.index"))},R=()=>{d.reset(),N.get(route("admin.users.index"))},q=()=>{r.post(route("admin.users.store"),{onSuccess:()=>{x(!1),r.reset()}})},F=()=>{a.put(route("admin.users.update",c.id),{onSuccess:()=>{u(!1),p(null),a.reset()}})},T=()=>{N.delete(route("admin.users.destroy",c.id),{onSuccess:()=>{h(!1),p(null)}})},$=s=>{confirm(`Êtes-vous sûr de vouloir ${s.email_verified_at?"désactiver":"activer"} ce compte ?`)&&N.post(route("admin.users.toggle-status",s.id))},I=s=>{p(s),a.setData({name:s.name,email:s.email,password:"",password_confirmation:"",role:s.role||"assistant"}),u(!0)},B=s=>{p(s),h(!0)},P=s=>s==="admin"?"red":"blue",U=s=>s.email_verified_at?"green":"gray";return e.jsxs(e.Fragment,{children:[e.jsx(Z,{title:"Gestion des utilisateurs - Administration"}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(W,{}),e.jsx("header",{className:"bg-white shadow-sm border-b mb-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des utilisateurs"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Administration des comptes utilisateurs"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(v,{href:route("admin.dashboard"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"← Retour au tableau de bord"}),e.jsx(m,{onClick:()=>x(!0),children:"Nouvel utilisateur"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900",children:o.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-red-500",children:o.admins}),e.jsx("div",{className:"text-sm text-gray-600",children:"Administrateurs"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-500",children:o.assistants}),e.jsx("div",{className:"text-sm text-gray-600",children:"Assistants"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-green-500",children:o.verified}),e.jsx("div",{className:"text-sm text-gray-600",children:"Actifs"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-400",children:o.unverified}),e.jsx("div",{className:"text-sm text-gray-600",children:"Inactifs"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtres"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rôle"}),e.jsxs("select",{value:d.data.role,onChange:s=>d.setData("role",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Tous les rôles"}),e.jsx("option",{value:"admin",children:"Administrateur"}),e.jsx("option",{value:"assistant",children:"Assistant"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),e.jsxs("select",{value:d.data.status,onChange:s=>d.setData("status",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),e.jsx("option",{value:"active",children:"Actif"}),e.jsx("option",{value:"inactive",children:"Inactif"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recherche"}),e.jsx("input",{type:"text",value:d.data.search,onChange:s=>d.setData("search",s.target.value),placeholder:"Nom ou email...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tri"}),e.jsxs("select",{value:`${d.data.sort_by}-${d.data.sort_order}`,onChange:s=>{const[l,i]=s.target.value.split("-");d.setData("sort_by",l),d.setData("sort_order",i)},className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"created_at-desc",children:"Plus récents"}),e.jsx("option",{value:"created_at-asc",children:"Plus anciens"}),e.jsx("option",{value:"name-asc",children:"Nom (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Nom (Z-A)"}),e.jsx("option",{value:"email-asc",children:"Email (A-Z)"}),e.jsx("option",{value:"email-desc",children:"Email (Z-A)"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(m,{onClick:E,children:"Appliquer les filtres"}),e.jsx(b,{onClick:R,children:"Réinitialiser"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Utilisateurs (",t.total,")"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de création"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.data&&t.data.map(s=>{var i;const l={id:(s==null?void 0:s.id)||0,name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",role:(s==null?void 0:s.role)||"assistant",email_verified_at:(s==null?void 0:s.email_verified_at)||null,created_at:(s==null?void 0:s.created_at)||""};return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:l.name}),e.jsx("div",{className:"text-sm text-gray-500",children:l.email})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(w,{status:l.role==="admin"?"Administrateur":"Assistant",color:P(l.role)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(w,{status:l.email_verified_at?"Actif":"Inactif",color:U(l)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.created_at}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(v,{href:route("admin.users.show",l.id),className:"text-blue-600 hover:text-blue-900",children:"Voir"}),e.jsx("button",{onClick:()=>I(l),className:"text-green-600 hover:text-green-900",children:"Modifier"}),e.jsx("button",{onClick:()=>$(l),className:`${l.email_verified_at?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900"}`,children:l.email_verified_at?"Désactiver":"Activer"}),l.id!==((i=f==null?void 0:f.user)==null?void 0:i.id)&&e.jsx("button",{onClick:()=>B(l),className:"text-red-600 hover:text-red-900",children:"Supprimer"})]})})]},l.id)})})]})}),t.links&&t.links.length>0&&e.jsx("div",{className:"px-6 py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",t.from," à ",t.to," sur ",t.total," résultats"]}),e.jsx("div",{className:"flex space-x-2",children:t.links.map((s,l)=>{const i={url:(s==null?void 0:s.url)||null,label:(s==null?void 0:s.label)||"",active:(s==null?void 0:s.active)||!1};return e.jsx(v,{href:i.url,className:`px-3 py-2 text-sm rounded-md ${i.active?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"} ${i.url?"":"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:i.label}},l)})})]})})]})]})]}),e.jsx(y,{show:k,onClose:()=>x(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Nouvel utilisateur"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),e.jsx("input",{type:"text",value:r.data.name,onChange:s=>r.setData("name",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:r.data.email,onChange:s=>r.setData("email",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe"}),e.jsx("input",{type:"password",value:r.data.password,onChange:s=>r.setData("password",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),r.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le mot de passe"}),e.jsx("input",{type:"password",value:r.data.password_confirmation,onChange:s=>r.setData("password_confirmation",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rôle"}),e.jsxs("select",{value:r.data.role,onChange:s=>r.setData("role",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"assistant",children:"Assistant"}),e.jsx("option",{value:"admin",children:"Administrateur"})]}),r.errors.role&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.errors.role})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(b,{onClick:()=>x(!1),children:"Annuler"}),e.jsx(m,{onClick:q,disabled:r.processing,children:r.processing?"Création...":"Créer"})]})]})}),e.jsx(y,{show:D,onClose:()=>u(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Modifier l'utilisateur"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet"}),e.jsx("input",{type:"text",value:a.data.name,onChange:s=>a.setData("name",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),a.errors.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.errors.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:a.data.email,onChange:s=>a.setData("email",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),a.errors.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe (optionnel)"}),e.jsx("input",{type:"password",value:a.data.password,onChange:s=>a.setData("password",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"}),a.errors.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.errors.password})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le nouveau mot de passe"}),e.jsx("input",{type:"password",value:a.data.password_confirmation,onChange:s=>a.setData("password_confirmation",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rôle"}),e.jsxs("select",{value:a.data.role,onChange:s=>a.setData("role",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"assistant",children:"Assistant"}),e.jsx("option",{value:"admin",children:"Administrateur"})]}),a.errors.role&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.errors.role})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(b,{onClick:()=>u(!1),children:"Annuler"}),e.jsx(m,{onClick:F,disabled:a.processing,children:a.processing?"Modification...":"Enregistrer"})]})]})}),e.jsx(y,{show:M,onClose:()=>h(!1),maxWidth:"sm",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Supprimer l'utilisateur"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Êtes-vous sûr de vouloir supprimer l'utilisateur ",e.jsx("strong",{children:c==null?void 0:c.name})," ? Cette action est irréversible."]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(b,{onClick:()=>h(!1),children:"Annuler"}),e.jsx(m,{onClick:T,className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})})]})}export{Y as default};
