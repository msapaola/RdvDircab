import{r as i,j as e,Q as h,S as j}from"./app-DJEz0kcv.js";import{P as f}from"./PrimaryButton-BDgkQDe0.js";import{S as g}from"./dialog-Bl6FfDri.js";import{M as N}from"./Modal-D65y7rR1.js";import{A as b}from"./ApplicationLogo-BKPgQOmp.js";import"./transition-CaKYh0T2.js";function A({appointment:s,activities:v}){const[c,t]=i.useState(!1),[n,l]=i.useState(!1),d=async()=>{l(!0);try{const a=await(await fetch(`/appointments/${s.secure_token}/cancel`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).json();a.success?j.reload():alert(a.message||"Une erreur est survenue")}catch{alert("Une erreur de connexion est survenue")}finally{l(!1),t(!1)}},m=r=>{switch(r){case"pending":return"En attente";case"accepted":return"Accepté";case"rejected":return"Refusé";case"canceled":return"Annulé";case"canceled_by_requester":return"Annulé par vous";case"completed":return"Terminé";case"expired":return"Expiré";default:return"En attente"}},o=r=>{switch(r){case"normal":return"Normal";case"urgent":return"Urgent";case"official":return"Officiel";default:return"Normal"}},x=r=>r?new Date(r).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"}):"",u=r=>r?new Date(r).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"";return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:`Suivi - ${s.subject}`}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"py-6 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(b,{className:"h-14 w-auto"})}),e.jsx("a",{href:"/",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"← Retour à l'accueil"})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 mt-8 mb-4 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Suivi de votre demande"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Cabinet du Gouverneur de Kinshasa"})]}),e.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border mb-6",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Statut de votre demande"}),e.jsx("span",{className:"text-base font-medium",children:s.status?m(s.status):"Non renseigné"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Détails de la demande"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Objet :"})," ",s.subject]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date souhaitée :"})," ",s.preferred_date?x(s.preferred_date):"Non définie"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Heure souhaitée :"})," ",s.preferred_time?s.preferred_time.slice(0,5).replace(":","h"):"Non définie"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Priorité :"})," ",s.priority?o(s.priority):"Non définie"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Vos informations"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Nom :"})," ",s.name]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email :"})," ",s.email]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Téléphone :"})," ",s.phone]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Date de soumission :"})," ",s.created_at?u(s.created_at):"Non définie"]})]})]})]}),s.message&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Message"}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 text-sm text-gray-700",children:s.message})]}),s.attachments&&s.attachments.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:["Pièces jointes (",s.attachments.length,")"]}),e.jsx("div",{className:"space-y-2",children:s.attachments.map((r,a)=>e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),r.name]},a))})]}),s.can_be_canceled_by_requester&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center",children:e.jsx("button",{onClick:()=>t(!0),className:"inline-block px-6 py-2 rounded bg-red-600 text-white font-semibold shadow hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition",children:"Annuler ce rendez-vous"})}),s.admin_notes&&e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Note de l'administration"}),e.jsx("p",{className:"text-sm text-blue-800",children:s.admin_notes})]}),s.rejection_reason&&e.jsxs("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-red-900 mb-2",children:"Raison du refus"}),e.jsx("p",{className:"text-sm text-red-800",children:s.rejection_reason})]})]})}),e.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Informations importantes"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Vous recevrez une notification par email lors de tout changement de statut"}),e.jsx("li",{children:"• Les rendez-vous acceptés peuvent être annulés jusqu'à 24h avant la date"}),e.jsx("li",{children:"• En cas d'urgence, contactez-nous directement au +243 XXX XXX XXX"})]})]})]})]}),e.jsx(N,{show:c,onClose:()=>t(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmer l'annulation"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Êtes-vous sûr de vouloir annuler votre rendez-vous ? Cette action ne peut pas être annulée."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(g,{onClick:()=>t(!1),children:"Annuler"}),e.jsx(f,{onClick:d,disabled:n,className:"bg-red-600 hover:bg-red-700 focus:ring-red-500",children:n?"Annulation...":"Confirmer l'annulation"})]})]})})]})}export{A as default};
