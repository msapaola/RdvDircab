import{r as d,S as u,x as U,j as e,Q as de}from"./app-_l2i9YCZ.js";import{P as N}from"./PrimaryButton-DmKOtVX-.js";import{S as f}from"./dialog-2ouo94h7.js";import{M as y}from"./Modal-DRVFEEQe.js";import{D as ce}from"./DashboardMenu-Cf-xQgmD.js";import{S as H}from"./SafeLink-B01n5V8r.js";import{A as ne}from"./AttachmentViewer-B5OJF1B4.js";import"./transition-CwMkTikq.js";import"./ApplicationLogo-DYfvjMGm.js";import"./ResponsiveNavLink-BZKmw3NZ.js";function Ne({appointments:l,stats:x,filters:o}){const[W,v]=d.useState(!1),[G,w]=d.useState(!1),[Q,D]=d.useState(!1),[X,C]=d.useState(!1),[Z,_]=d.useState(!1),[r,m]=d.useState(null),[i,p]=d.useState([]),[R,T]=d.useState(""),[S,z]=d.useState(""),[c,q]=d.useState(""),[k,I]=d.useState(""),[A,P]=d.useState("table"),[E,J]=d.useState(!1);d.useEffect(()=>{if(!E)return;const s=setInterval(()=>{u.reload({only:["appointments","stats"]})},3e4);return()=>clearInterval(s)},[E]);const a=U({status:o.status||"",priority:o.priority||"",date_from:o.date_from||"",date_to:o.date_to||"",search:o.search||"",sort_by:o.sort_by||"created_at",sort_order:o.sort_order||"desc",per_page:o.per_page||20}),t=U({name:"",email:"",phone:"",subject:"",message:"",preferred_date:"",preferred_time:"",priority:"normal",status:"pending",admin_notes:""}),K=()=>{a.get(route("admin.appointments.index"))},Y=()=>{a.reset(),u.get(route("admin.appointments.index"))},ee=()=>{if(!R.trim()){alert("Veuillez indiquer une raison de refus.");return}u.post(route("admin.appointments.reject",r.id),{rejection_reason:R},{onSuccess:()=>{v(!1),m(null),T("")}})},se=()=>{if(!S.trim()){alert("Veuillez indiquer une raison d'annulation.");return}u.post(route("admin.appointments.cancel",r.id),{admin_notes:S},{onSuccess:()=>{w(!1),m(null),z("")}})},F=s=>{confirm("Êtes-vous sûr de vouloir accepter ce rendez-vous ?")&&u.post(route("admin.appointments.accept",s.id))},te=s=>{confirm("Marquer ce rendez-vous comme terminé ?")&&u.post(route("admin.appointments.complete",s.id))},re=()=>{t.put(route("admin.appointments.update",r.id),{onSuccess:()=>{C(!1),m(null),t.reset()}})},$=s=>{m(s);const n=j=>j?new Date(j).toISOString().split("T")[0]:"";t.setData({name:s.name,email:s.email,phone:s.phone,subject:s.subject,message:s.message||"",preferred_date:n(s.preferred_date),preferred_time:s.preferred_time,priority:s.priority,status:s.status,admin_notes:s.admin_notes||""}),C(!0)},ae=()=>{if(!c){alert("Veuillez sélectionner une action.");return}if(i.length===0){alert("Veuillez sélectionner au moins un rendez-vous.");return}if((c==="reject"||c==="cancel")&&!k.trim()){alert("Veuillez indiquer une raison.");return}const s={appointment_ids:i,action:c};(c==="reject"||c==="cancel")&&k.trim()&&(s.reason=k.trim()),u.post(route("admin.appointments.bulk-action"),s,{onSuccess:()=>{_(!1),p([]),q(""),I("")},onError:n=>{alert("Erreur lors de l'exécution de l'action en lot.")}})},L=s=>{p(n=>n.includes(s)?n.filter(j=>j!==s):[...n,s])},O=()=>{i.length===l.data.length?p([]):p(l.data.map(s=>s.id))},V=s=>{m(s),v(!0)},le=s=>{m(s),w(!0)},B=s=>{m(s),D(!0)},h=s=>{switch(s){case"urgent":return{text:"URGENT",class:"text-red-700 bg-red-100 border-red-300"};case"official":return{text:"OFFICIEL",class:"text-blue-700 bg-blue-100 border-blue-300"};case"normal":return{text:"NORMALE",class:"text-gray-700 bg-gray-100 border-gray-300"};default:return{text:"NORMALE",class:"text-gray-700 bg-gray-100 border-gray-300"}}},g=s=>{switch(s){case"pending":return{text:"EN ATTENTE",class:"text-orange-700 bg-orange-100 border-orange-300"};case"accepted":return{text:"ACCEPTÉ",class:"text-green-700 bg-green-100 border-green-300"};case"rejected":return{text:"REFUSÉ",class:"text-red-700 bg-red-100 border-red-300"};case"canceled":return{text:"ANNULÉ",class:"text-gray-700 bg-gray-100 border-gray-300"};case"canceled_by_requester":return{text:"ANNULÉ PAR LE CLIENT",class:"text-gray-700 bg-gray-100 border-gray-300"};case"completed":return{text:"TERMINÉ",class:"text-blue-700 bg-blue-100 border-blue-300"};case"expired":return{text:"EXPIRÉ",class:"text-yellow-700 bg-yellow-100 border-yellow-300"};default:return{text:"EN ATTENTE",class:"text-orange-700 bg-orange-100 border-orange-300"}}},b=s=>new Date(s).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),M=s=>s;return e.jsxs(e.Fragment,{children:[e.jsx(de,{title:"Gestion des rendez-vous - Administration"}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ce,{}),e.jsx("header",{className:"bg-white shadow-sm border-b mb-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des rendez-vous"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Outil de gestion efficace des demandes de rendez-vous"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoRefresh",checked:E,onChange:s=>J(s.target.checked),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"autoRefresh",className:"text-sm text-gray-600",children:"Auto-refresh"})]}),e.jsx(H,{href:route("admin.dashboard"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"← Retour au tableau de bord"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-gray-400",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:x.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-orange-400",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-500",children:x.pending}),e.jsx("div",{className:"text-sm text-gray-600",children:"En attente"}),x.pending>0&&e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"⚠️ Action requise"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-green-400",children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:x.accepted}),e.jsx("div",{className:"text-sm text-gray-600",children:"Acceptés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-red-400",children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:x.rejected}),e.jsx("div",{className:"text-sm text-gray-600",children:"Refusés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-gray-300",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-400",children:x.canceled}),e.jsx("div",{className:"text-sm text-gray-600",children:"Annulés"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center border-l-4 border-blue-400",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-500",children:x.completed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Terminés"})]})]}),i.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-blue-800 font-medium",children:[i.length," rendez-vous sélectionné(s)"]}),e.jsx("button",{onClick:()=>_(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-blue-700",children:"Actions en lot"})]}),e.jsx("button",{onClick:()=>p([]),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Annuler la sélection"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filtres et recherche"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>P("table"),className:`px-3 py-1 rounded-md text-sm font-medium ${A==="table"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tableau"}),e.jsx("button",{onClick:()=>P("cards"),className:`px-3 py-1 rounded-md text-sm font-medium ${A==="cards"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Cartes"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),e.jsxs("select",{value:a.data.status,onChange:s=>a.setData("status",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Tous les statuts"}),e.jsx("option",{value:"pending",children:"En attente"}),e.jsx("option",{value:"accepted",children:"Accepté"}),e.jsx("option",{value:"rejected",children:"Refusé"}),e.jsx("option",{value:"canceled",children:"Annulé"}),e.jsx("option",{value:"canceled_by_requester",children:"Annulé par le demandeur"}),e.jsx("option",{value:"expired",children:"Expiré"}),e.jsx("option",{value:"completed",children:"Terminé"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priorité"}),e.jsxs("select",{value:a.data.priority,onChange:s=>a.setData("priority",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Toutes les priorités"}),e.jsx("option",{value:"normal",children:"Normale"}),e.jsx("option",{value:"urgent",children:"Urgente"}),e.jsx("option",{value:"official",children:"Officielle"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recherche"}),e.jsx("input",{type:"text",value:a.data.search,onChange:s=>a.setData("search",s.target.value),placeholder:"Nom, email ou objet...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Par page"}),e.jsxs("select",{value:a.data.per_page,onChange:s=>a.setData("per_page",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"20",children:"20"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de début"}),e.jsx("input",{type:"date",value:a.data.date_from,onChange:s=>a.setData("date_from",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de fin"}),e.jsx("input",{type:"date",value:a.data.date_to,onChange:s=>a.setData("date_to",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tri"}),e.jsxs("select",{value:`${a.data.sort_by}-${a.data.sort_order}`,onChange:s=>{const[n,j]=s.target.value.split("-");a.setData("sort_by",n),a.setData("sort_order",j)},className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"created_at-desc",children:"Plus récents"}),e.jsx("option",{value:"created_at-asc",children:"Plus anciens"}),e.jsx("option",{value:"preferred_date-asc",children:"Date RDV (croissant)"}),e.jsx("option",{value:"preferred_date-desc",children:"Date RDV (décroissant)"}),e.jsx("option",{value:"name-asc",children:"Nom (A-Z)"}),e.jsx("option",{value:"name-desc",children:"Nom (Z-A)"}),e.jsx("option",{value:"priority-desc",children:"Priorité (haute → basse)"}),e.jsx("option",{value:"priority-asc",children:"Priorité (basse → haute)"})]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(N,{onClick:K,children:"🔍 Appliquer les filtres"}),e.jsx(f,{onClick:Y,children:"🔄 Réinitialiser"})]})]}),A==="table"&&e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Rendez-vous (",l.total,")"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:i.length===l.data.length&&l.data.length>0,onChange:O,className:"rounded border-gray-300"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Sélectionner tout"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:i.length===l.data.length&&l.data.length>0,onChange:O,className:"rounded border-gray-300"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Demandeur"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Objet"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date/Heure"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priorité"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.data.map(s=>e.jsxs("tr",{className:`hover:bg-gray-50 ${s.status==="pending"?"bg-orange-50":""}`,children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>L(s.id),className:"rounded border-gray-300"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),e.jsx("div",{className:"text-xs text-gray-400",children:s.phone})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:s.subject}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Créé le ",b(s.created_at)]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:b(s.preferred_date)}),e.jsx("div",{className:"text-sm text-gray-500",children:M(s.preferred_time)})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${h(s.priority).class}`,children:h(s.priority).text})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${g(s.status).class}`,children:g(s.status).text})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>B(s),className:"text-blue-600 hover:text-blue-900 flex items-center",children:["👁️ Voir",s.attachments&&s.attachments.length>0&&e.jsxs("span",{className:"ml-1 text-xs bg-blue-100 text-blue-800 px-1.5 py-0.5 rounded-full",children:["📎 ",s.attachments.length]})]}),e.jsx("button",{onClick:()=>$(s),className:"text-purple-600 hover:text-purple-900",children:"✏️ Modifier"}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>F(s),className:"text-green-600 hover:text-green-900",children:"✅ Accepter"}),e.jsx("button",{onClick:()=>V(s),className:"text-red-600 hover:text-red-900",children:"❌ Refuser"})]}),s.status==="accepted"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>te(s),className:"text-blue-600 hover:text-blue-900",children:"✅ Terminer"}),e.jsx("button",{onClick:()=>le(s),className:"text-gray-600 hover:text-gray-900",children:"🚫 Annuler"})]})]})})]},s.id))})]})}),l.links&&e.jsx("div",{className:"px-6 py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Affichage de ",l.from," à ",l.to," sur ",l.total," résultats"]}),e.jsx("div",{className:"flex space-x-2",children:l.links.map((s,n)=>s.url?e.jsx(H,{href:s.url,className:`px-3 py-2 text-sm rounded-md ${s.active?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,dangerouslySetInnerHTML:{__html:s.label}},n):e.jsx("span",{className:`px-3 py-2 text-sm rounded-md opacity-50 cursor-not-allowed ${s.active?"bg-blue-500 text-white":"bg-white text-gray-700"}`,dangerouslySetInnerHTML:{__html:s.label}},n))})]})})]}),A==="cards"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.data.map(s=>e.jsx("div",{className:`bg-white rounded-lg shadow-md border-l-4 ${s.status==="pending"?"border-orange-400":s.status==="accepted"?"border-green-400":s.status==="rejected"?"border-red-400":s.status==="completed"?"border-blue-400":"border-gray-400"}`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.email}),e.jsx("p",{className:"text-xs text-gray-500",children:s.phone})]}),e.jsx("input",{type:"checkbox",checked:i.includes(s.id),onChange:()=>L(s.id),className:"rounded border-gray-300"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:s.subject}),s.attachments&&s.attachments.length>0&&e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:["📎 ",s.attachments.length," fichier(s)"]})]}),e.jsxs("p",{className:"text-xs text-gray-600",children:[s.message&&s.message.substring(0,100),"..."]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Date"}),e.jsx("p",{className:"text-sm font-medium",children:b(s.preferred_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Heure"}),e.jsx("p",{className:"text-sm font-medium",children:M(s.preferred_time)})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${h(s.priority).class}`,children:h(s.priority).text}),e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${g(s.status).class}`,children:g(s.status).text})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>B(s),className:"flex-1 bg-blue-600 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-blue-700 flex items-center justify-center",children:["👁️ Détails",s.attachments&&s.attachments.length>0&&e.jsxs("span",{className:"ml-1 text-xs bg-blue-200 text-blue-800 px-1.5 py-0.5 rounded-full",children:["📎 ",s.attachments.length]})]}),e.jsx("button",{onClick:()=>$(s),className:"bg-purple-600 text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-700",children:"✏️ Modifier"}),s.status==="pending"&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>F(s),className:"bg-green-600 text-white px-2 py-2 rounded-md text-sm hover:bg-green-700",title:"Accepter",children:"✅"}),e.jsx("button",{onClick:()=>V(s),className:"bg-red-600 text-white px-2 py-2 rounded-md text-sm hover:bg-red-700",title:"Refuser",children:"❌"})]})]})]})},s.id))})]})]}),e.jsx(y,{show:Q,onClose:()=>D(!1),maxWidth:"6xl",children:r&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:["Détails du rendez-vous - ",r.name]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Informations du demandeur"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nom :"})," ",r.name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email :"})," ",r.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Téléphone :"})," ",r.phone]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Date de création :"})," ",b(r.created_at)]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Détails du rendez-vous"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Objet :"})," ",r.subject]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Date souhaitée :"})," ",b(r.preferred_date)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Heure souhaitée :"})," ",M(r.preferred_time)]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Priorité :"}),e.jsx("span",{className:`ml-1 inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${h(r.priority).class}`,children:h(r.priority).text})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Statut :"}),e.jsx("span",{className:`ml-1 inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${g(r.status).class}`,children:g(r.status).text})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Informations système"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"ID :"})," ",r.id]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Token :"})," ",e.jsx("code",{className:"text-xs bg-gray-100 px-1 rounded",children:r.secure_token})]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"IP :"})," ",r.ip_address]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Modifié le :"})," ",b(r.updated_at)]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[r.message&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Message du demandeur"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:r.message})})]}),r.rejection_reason&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900 mb-3",children:"Raison du refus"}),e.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-red-700",children:r.rejection_reason})})]}),r.admin_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Notes administratives"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-700",children:r.admin_notes})})]})]}),r.attachments&&r.attachments.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-4",children:["Pièces jointes (",r.attachments.length,")"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx(ne,{attachments:r.attachments,appointmentId:r.id})})]}),e.jsx("div",{className:"mt-6 flex justify-end space-x-3",children:e.jsx(f,{onClick:()=>D(!1),children:"Fermer"})})]})}),e.jsx(y,{show:X,onClose:()=>C(!1),maxWidth:"4xl",children:r&&e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:["Modifier le rendez-vous - ",r.name]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),re()},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Informations du demandeur"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),e.jsx("input",{type:"text",value:t.data.name,onChange:s=>t.setData("name",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),t.errors.name&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:t.data.email,onChange:s=>t.setData("email",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),t.errors.email&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone *"}),e.jsx("input",{type:"tel",value:t.data.phone,onChange:s=>t.setData("phone",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),t.errors.phone&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.phone})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Détails du rendez-vous"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objet *"}),e.jsx("input",{type:"text",value:t.data.subject,onChange:s=>t.setData("subject",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),t.errors.subject&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.subject})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date souhaitée *"}),e.jsx("input",{type:"date",value:t.data.preferred_date,onChange:s=>t.setData("preferred_date",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),t.errors.preferred_date&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.preferred_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure souhaitée *"}),e.jsx("input",{type:"time",value:t.data.preferred_time,onChange:s=>t.setData("preferred_time",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}),t.errors.preferred_time&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.preferred_time})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priorité *"}),e.jsxs("select",{value:t.data.priority,onChange:s=>t.setData("priority",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"normal",children:"NORMALE"}),e.jsx("option",{value:"urgent",children:"URGENT"}),e.jsx("option",{value:"official",children:"OFFICIEL"})]}),t.errors.priority&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.priority})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut *"}),e.jsxs("select",{value:t.data.status,onChange:s=>t.setData("status",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"pending",children:"EN ATTENTE"}),e.jsx("option",{value:"accepted",children:"ACCEPTÉ"}),e.jsx("option",{value:"rejected",children:"REFUSÉ"}),e.jsx("option",{value:"canceled",children:"ANNULÉ"}),e.jsx("option",{value:"completed",children:"TERMINÉ"}),e.jsx("option",{value:"expired",children:"EXPIRÉ"})]}),t.errors.status&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.status})]})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message du demandeur"}),e.jsx("textarea",{value:t.data.message,onChange:s=>t.setData("message",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"3",placeholder:"Message du demandeur..."}),t.errors.message&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes administratives"}),e.jsx("textarea",{value:t.data.admin_notes,onChange:s=>t.setData("admin_notes",s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"3",placeholder:"Notes administratives..."}),t.errors.admin_notes&&e.jsx("p",{className:"text-red-600 text-xs mt-1",children:t.errors.admin_notes})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(f,{type:"button",onClick:()=>C(!1),children:"Annuler"}),e.jsx(N,{type:"submit",disabled:t.processing,children:t.processing?"Enregistrement...":"Enregistrer les modifications"})]})]})]})}),e.jsx(y,{show:W,onClose:()=>v(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Refuser le rendez-vous"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Veuillez indiquer la raison du refus pour le rendez-vous de ",e.jsx("strong",{children:r==null?void 0:r.name}),"."]}),e.jsx("textarea",{value:R,onChange:s=>T(s.target.value),placeholder:"Raison du refus...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(f,{onClick:()=>v(!1),children:"Annuler"}),e.jsx(N,{onClick:ee,children:"Confirmer le refus"})]})]})}),e.jsx(y,{show:G,onClose:()=>w(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Annuler le rendez-vous"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Veuillez indiquer la raison de l'annulation pour le rendez-vous de ",e.jsx("strong",{children:r==null?void 0:r.name}),"."]}),e.jsx("textarea",{value:S,onChange:s=>z(s.target.value),placeholder:"Raison de l'annulation...",className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"4"}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(f,{onClick:()=>w(!1),children:"Annuler"}),e.jsx(N,{onClick:se,children:"Confirmer l'annulation"})]})]})}),e.jsx(y,{show:Z,onClose:()=>_(!1),maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Actions en lot (",i.length," rendez-vous)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action à effectuer"}),e.jsxs("select",{value:c,onChange:s=>q(s.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Sélectionner une action"}),e.jsx("option",{value:"accept",children:"Accepter"}),e.jsx("option",{value:"reject",children:"Refuser"}),e.jsx("option",{value:"cancel",children:"Annuler"}),e.jsx("option",{value:"complete",children:"Marquer comme terminé"})]})]}),(c==="reject"||c==="cancel")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:c==="reject"?"Raison du refus":"Raison de l'annulation"}),e.jsx("textarea",{value:k,onChange:s=>I(s.target.value),placeholder:`Raison du ${c==="reject"?"refus":"annulation"}...`,className:"w-full border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500",rows:"3"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(f,{onClick:()=>_(!1),children:"Annuler"}),e.jsx(N,{onClick:ae,children:"Exécuter l'action"})]})]})})]})}export{Ne as default};
